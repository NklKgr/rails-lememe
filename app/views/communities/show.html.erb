<h1><%= @community.name %></h1>

<% if @membership.id %>

  <% if @membership.status == "approved" %>
    <%= @membership.status %>

    <%# insert page content for approved members %>

  <% elsif @membership.status == "pending" %>
    <%= @membership.status %>
    <p>Please, be patient, we are processing your membership request.</p>
  <% else %>
    <%= @membership.status %>
    <p>Sorry, your request was rejected.</p>
  <% end %>

<% elsif @community.user == current_user %>
  <%= link_to community_memberships_path(@community), data: { turbo: false } do %>
    <button type="button" class="btn btn-primary">View Memberships</button>
  <% end %>

<% else %>
  <%= simple_form_for [@community, @membership] do |f| %>
    <%= f.button :submit, "Apply for Membership", disabled: @membership.persisted? %>
  <% end %>
<% end %>

<div class="container border border-info">
  <div class="row">
    <div class="col-md-8">
      <div class="community-details">
        <h2><%= @community.name %></h2>
        <p><%= @community.description %></p>
      </div>

      <div class="memes">
        <% @community.memes.each do |meme| %>
          <div class="meme">
            <h4><%= meme.title %></h4>
          </div>
        <% end %>
      </div>
    </div>

    <div class="col-md-4 border border-info">
      <div class="sidebar">
        <h3>Community Members</h3>
        <ul>
          <% @community.users.each do |user| %>
            <li><%= user.name %></li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>
</div>
